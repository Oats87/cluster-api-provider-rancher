apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
kind: DockerCluster
metadata:
  name: test-cluster
  namespace: default
---
apiVersion: cluster.x-k8s.io/v1beta1
kind: Cluster
metadata:
  name: test-cluster
  namespace: default
spec:
  infrastructureRef:
    apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
    kind: DockerCluster
    name: test-cluster
    namespace: default
  controlPlaneRef:
    apiVersion: rke.cattle.io/v1
    kind: RKEControlPlane
    name: test-cluster
    namespace: default
---
apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
kind: DockerMachineTemplate
metadata:
  labels:
    cluster.x-k8s.io/cluster-name: test-cluster
  name: dm-template-0
  namespace: default
spec:
  template:
    spec:
      customImage: oats87/systemd-node:v0.0.5-capr
---
apiVersion: rke.cattle.io/v1
kind: RKEBootstrapTemplate
metadata:
  name: bootstrap-template-0
  namespace: default
spec:
  clusterName: test-cluster
  template:
    spec:
      clusterName: test-cluster
      version: v1.27.4+rke2r1
---
apiVersion: rke.cattle.io/v1
kind: RKEControlPlane
metadata:
  name: test-cluster
  namespace: default
  labels:
    cluster.x-k8s.io/cluster-name: test-cluster
    rke.cattle.io/cluster-name: test-cluster
spec:
  machineGlobalConfig:
    kube-apiserver-arg: "anonymous-auth=true"
  kubernetesVersion: v1.27.4+rke2r1
  version: v1.27.4+rke2r1
  localClusterAuthEndpoint:
    enabled: false
  replicas: 1
  rolloutStrategy:
    type: "RollingUpdate"
  infrastructureRef:
    apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
    kind: DockerMachineTemplate
    name: dm-template-0
    namespace: default

